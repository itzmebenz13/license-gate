<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Loading...</title>

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<style>
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: #f8f8f8;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
    user-select: none;
    -webkit-user-select: none;
  }

  .security-box {
    text-align: center;
    padding: 20px;
  }

  /* FASTER SPINNER ANIMATION */
  .loader {
    width: 40px;
    height: 40px;
    border: 3px solid rgba(0, 0, 0, 0.1);
    border-top: 3px solid #000;
    border-radius: 50%;
    animation: spin 0.6s linear infinite; /* Sped up to 0.6s */
    margin: 0 auto 15px auto;
  }

  .status-text {
    font-size: 13px;
    color: #333;
    font-weight: 500;
  }

  /* HIDDEN ERROR SCREEN */
  #fake-error {
    display: none;
    text-align: center;
    padding: 20px;
  }
  .error-icon { font-size: 48px; margin-bottom: 10px; }
  .error-title { font-weight: bold; font-size: 18px; color: #000; margin-bottom: 5px;}
  .error-desc { font-size: 14px; color: #666; }

  @keyframes spin { 100% { transform: rotate(360deg); } }
</style>
</head>

<body oncontextmenu="return false;">

  <div class="security-box" id="main-view">
    <div class="loader"></div>
    <p class="status-text" id="status">Secure Verifying...</p>
  </div>

  <div id="fake-error">
    <div class="error-icon">ðŸ“¶</div>
    <div class="error-title">No Internet Connection</div>
    <div class="error-desc">Please check your network settings and try again.</div>
    <button onclick="location.reload()" style="margin-top:20px; padding:12px 30px; background:#000; color:#fff; border:none; border-radius:25px; font-weight:bold; font-size:12px;">RETRY</button>
  </div>

<script>
(function () {
  // --- CONFIGURATION ---
  // The Target URL (Base64 Encoded)
  const ENCRYPTED_TARGET = "aHR0cHM6Ly9hcGktc2hlaW4uc2hlaW4uY29tL2Fyay8zMjEwP3R5cGU9aW1tZXJzaXZlJnZlcnNpb25fYmlkPTEwMTY4MjQxMSUyQzEwMTUwNzU1MSUyQzEwMDcxMDc0MSUyQzEwMTU0NTA5NiUyQzEwMTY4MjUxMSZzaXRldWlkPWFuZHNocGgmdGVzdD01MDYxJmFkX3R5cGU9RFBBJmFjdGl2aXR5PW5ld3VzZXJwcmljZSZnb29kc19pZD0xOTc2MDAwNzYmY29sb3JhdGlvbj0xJmxhbmd1YWdlPWVuJmxpbmtfZGV2aWNlX2xldmVsPTEmdHlwZT1pbW1lcnNpdmUmY3Jvd2RfaWQ9MSZ2ZXJzaW9uX2VpZD0xMDA2NDc0NzEmc2NlbmU9MSZ0dl9iPTImcGY9ZmFjZWJvb2smcmVxdWVzdElkPWFwcC0zNDc3NDI0ZS1hYjY1LTRkZGYtOTY4NC0wZTRkNWIwZDIxYzcmYXJrSWQ9MzIxMCZsYW5kaW5nX3BhZ2VfaWQ9MzIxMCZhZF90ZXN0X2lkPTQ0OTUwJmtleV9pc19vdXRzaWRlX2xpbms9dHJ1ZSZ1Z2lkPTA0MGlbG9qMHh3JnVybF9mcm9tPWFkaHViMTk1NzY3Mjc3JnRhcmdldF91cmw9aHR0cHMlM0ElMkYlMkZwaC5zaGVpbi5jb20lMkZhcmslMkZkZWZhdWx0JTNGc2NlbmUlM0QxJTI2dGVzdCUzRDUwNTElMjZhZF90eXBlJTNERFBBJTI2Z29vZHNfaWQlM0Q5NDE4OTg5OCZhcHA9c2hlaW4=";

  const FALLBACK_URL = "https://www.google.com";
  
  // Variables
  let redirectTimer = null;
  const status = document.getElementById("status");
  const mainView = document.getElementById("main-view");
  const errorView = document.getElementById("fake-error");

  // --- 1. KILL SWITCH (The Security Layer) ---
  // This listens for the EXACT MOMENT wifi is turned off.
  function handleOffline() {
    if (redirectTimer) clearTimeout(redirectTimer); // STOP the redirect
    mainView.style.display = "none";
    errorView.style.display = "block";
    document.title = "Connection Error";
  }

  // Listeners
  window.addEventListener('offline', handleOffline);

  // --- 2. MAIN LOGIC ---
  function init() {
    // If already offline, show error immediately
    if (!navigator.onLine) {
      handleOffline();
      return;
    }

    const ua = navigator.userAgent.toLowerCase();
    const isShein = ua.includes("shein") || ua.includes("shein_android") || ua.includes("shein_ios");

    // If not Shein, send to Google (fast)
    if (!isShein) {
      status.innerText = "Redirecting...";
      setTimeout(() => { window.location.replace(FALLBACK_URL); }, 500);
      return;
    }

    // Shein Detected
    status.innerText = "Authenticating...";

    // --- 3. THE REDIRECT (Simplified) ---
    // We wait 1.2 seconds. If they cut wifi during this time, handleOffline() triggers.
    // If they don't, we redirect instantly.
    redirectTimer = setTimeout(() => {
      
      // Final Check: Are we still online?
      if (!navigator.onLine) {
        handleOffline();
      } else {
        // Decode and Go
        const realUrl = atob(ENCRYPTED_TARGET);
        window.location.replace(realUrl);
      }

    }, 1200); 
  }

  // Start immediately
  init();

})();
</script>
</body>
</html>
    // UPDATE text just in case
    document.title = "Connection Error";
  }

  // Listen for network changes in real-time
  window.addEventListener('offline', handleOffline);

  // --- 3. ENVIRONMENT CHECK ---
  function init() {
    const ua = navigator.userAgent.toLowerCase();
    
    // Check if we are truly online before starting
    if (!navigator.onLine) {
      handleOffline();
      return;
    }

    const isShein = ua.includes("shein") || ua.includes("shein_android") || ua.includes("shein_ios");

    if (!isShein) {
      status.innerText = "Redirecting...";
      setTimeout(() => { window.location.replace(FALLBACK_URL); }, 1000);
      return;
    }

    // Shein Detected - Start the Timer
    status.innerText = "Authenticating...";
    
    // Store the timer ID so we can cancel it if they pull the plug
    redirectTimer = setTimeout(() => {
      performSafeRedirect();
    }, 1200); // Slightly shorter delay
  }

  // --- 4. PRE-FLIGHT PING (The "Safety Check") ---
  // Before we actually command the browser to change URLs, we check the network one last time.
  function performSafeRedirect() {
    // Double check: Are we still online?
    if (!navigator.onLine) {
      handleOffline();
      return;
    }

    // Decode the URL at the last second
    const realUrl = atob(ENCRYPTED_TARGET);

    // TRICK: Try to load a tiny image. If this fails immediately, we know the net is gone.
    // This prevents the "browser error page" which leaks the link.
    const img = new Image();
    
    img.onerror = function() {
      // If image fails to load, assume network is unstable/spoofed -> ABORT
      handleOffline();
    };

    img.onload = function() {
      // Image loaded -> Internet is real -> GO.
      window.location.replace(realUrl);
    };

    // Trigger the check (using a tiny favicon or pixel to verify connectivity)
    // We add a random timestamp to prevent caching
    img.src = "https://www.google.com/favicon.ico?t=" + new Date().getTime();
    
    // Fallback: If the image takes too long (slow net), just try redirecting anyway 
    // but only if navigator.onLine is still true.
    setTimeout(() => {
        if(navigator.onLine) window.location.replace(realUrl);
    }, 1000);
  }

  // Start
  init();

})();
</script>
</body>
</html>

